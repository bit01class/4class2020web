<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
<style rel="stylesheet" type="text/css">
	h1+p{
		cursor: pointer;
	}
</style>
<script type="text/javascript">
var xhr;
var result;
function io(){
	// 비동기통신

	/* readyState -(https://developer.mozilla.org/ko/docs/Web/Guide/AJAX/Getting_Started)
	Value	State	Description
	0 (uninitialized) - (request가 초기화되지 않음)
	1 (loading) - (서버와의 연결이 성사됨)
	2 (loaded) - (서버가 request를 받음)
	3 (interactive) - (request(요청)을 처리하는 중)
	4 (complete) - (request에 대한 처리가 끝났으며 응답할 준비가 완료됨)
	*/
	/* 
	xhr.status (https://developer.mozilla.org/ko/docs/Web/HTTP/Status)
	200 OK	요청이 성공적으로 되었습니다.
	403 Forbidden 클라이언트는 콘텐츠에 접근할 권리를 가지고 있지 않습니다.
	404 Not Found	서버는 요청받은 리소스를 찾을 수 없습니다.
	405 Method Not Allowed	요청한 메소드는 서버에서 알고 있지만, 제거되었고 사용할 수 없습니다.
	500 Internal Server Error	서버가 처리 방법을 모르는 상황이 발생했습니다. 서버는 아직 처리 방법을 알 수 없습니다.
	502 Bad Gateway	이 오류 응답은 서버가 요청을 처리하는 데 필요한 응답을 얻기 위해 게이트웨이로 작업하는 동안 잘못된 응답을 수신했음을 의미합니다.
	*/
	
	
	xhr=new XMLHttpRequest();//통신용 객체
	xhr.onreadystatechange=function(){
		console.log(xhr.readyState,xhr.status);
		if(xhr.readyState==4){
			if(xhr.status==200){
				var msg=xhr.responseText;
				console.log(msg);
				result.innerHTML=msg;				
			}else{
				alert('err');
			}
		}
	};
	xhr.open('get','ex01.jsp');//통신정보
	xhr.send();//통신실행
}

window.onload=function(){
	result=document.querySelector("h1+p");
	io();
};
</script>
</head>
<body>
	<h1>자바스크립트 통신</h1>
	<p>result</p>
	<p><a href="ex01.jsp">link</a></p>
	<p>자바스크립트의 기본 통신방식은 비동기 통신입니다</p>
</body>
</html>